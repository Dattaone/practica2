"use strict";(self.webpackChunkpractica_2=self.webpackChunkpractica_2||[]).push([[991],{2727:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var a=n(5893),i=n(1151);const r={sidebar_position:3,title:"Docker + GitLab + SSL"},o="Manual de Instalaci\xf3n",l={id:"Guia de instalaciones/docker-gitlab-ssl",title:"Docker + GitLab + SSL",description:"Docker + GitLab + SSL",source:"@site/docs/Guia de instalaciones/docker-gitlab-ssl.md",sourceDirName:"Guia de instalaciones",slug:"/Guia de instalaciones/docker-gitlab-ssl",permalink:"/practica2/docs/Guia de instalaciones/docker-gitlab-ssl",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,title:"Docker + GitLab + SSL"},sidebar:"tutorialSidebar",previous:{title:"Script de Instalaci\xf3n",permalink:"/practica2/docs/Guia de instalaciones/script-de-instalacion"},next:{title:"Instalaci\xf3n del Facturador",permalink:"/practica2/docs/Guia de instalaciones/docker-linux-ssl"}},c={},d=[{value:"Docker + GitLab + SSL",id:"docker--gitlab--ssl",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n",level:3},{value:"Requisitos previos",id:"requisitos-previos",level:3},{value:"Pasos",id:"pasos",level:3},{value:"Recomendaciones",id:"recomendaciones",level:3}];function t(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.h1,{id:"manual-de-instalaci\xf3n",children:"Manual de Instalaci\xf3n"}),"\n",(0,a.jsx)(s.h2,{id:"docker--gitlab--ssl",children:"Docker + GitLab + SSL"}),"\n",(0,a.jsx)(s.h3,{id:"descripci\xf3n",children:"Descripci\xf3n"}),"\n",(0,a.jsx)(s.p,{children:"Hemos elaborado un script para uso en instancias Linux, que es un archivo .sh que actualiza el sistema, instala herramientas, sus dependencias, y configura un certificado SSL renovable cada 90 d\xedas. Este certificado debe ser confirmado en el proceso con su dominio y realiza todas las configuraciones previas, dejando el aplicativo listo para probar en menos de 20 minutos. Su ejecuci\xf3n es muy sencilla."}),"\n",(0,a.jsx)(s.h3,{id:"requisitos-previos",children:"Requisitos previos"}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsx)(s.p,{children:"Tener acceso a su servidor, VPS, m\xe1quina virtual o local v\xeda SSH. En las instalaciones que realizamos para AWS o Google Cloud, entregamos el usuario, la IP del servidor y la clave SSH que puede ser un archivo .ppk o .pem."}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsx)(s.p,{children:"Tener instalada una versi\xf3n de SSH en su m\xe1quina para conectarse de manera remota. Puede utilizar Putty, Filezilla o una consola terminal."}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsxs)(s.p,{children:["Es importante configurar su dominio apuntando a la IP de su instancia para que durante la ejecuci\xf3n del script se valide el certificado SSL. Al finalizar la ejecuci\xf3n, no debe haber errores y todo est\xe9 listo para realizar pruebas. Edite los registros A y CNAME donde A debe contener su IP y CNAME el valor * (asterisco) para que se tomen los subdominios registrados por la herramienta.\r\n",(0,a.jsx)(s.img,{alt:"imagen de DNS",src:n(4291).Z+"",width:"517",height:"277"})]}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsx)(s.p,{children:"Durante la ejecuci\xf3n del script, deber\xe1 almacenar en su dominio dos registros TXT con unos valores que se mostrar\xe1n en pantalla. Estos registros son validados en directo y no pueden tardar m\xe1s de 2 minutos en validarse en su dominio."}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsx)(s.p,{children:"En caso de contar con servicios instalados en su instancia como mysql, apache o nginx, debe detenerlos, ya que estos ocupan los puertos que pasar\xe1n a usarse con el aplicativo y los contenedores de Docker."}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(s.h3,{id:"pasos",children:"Pasos"}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsx)(s.p,{children:"Acceder a su instancia v\xeda SSH."}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsxs)(s.p,{children:["Loguearse como super usuario: ",(0,a.jsx)(s.code,{children:"sudo su"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsxs)(s.p,{children:["Ubicarse en la carpeta del usuario, por ejemplo:\r\n",(0,a.jsx)(s.code,{children:"cd /home/ubuntu/"})]}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsxs)(s.p,{children:["Crear el archivo ",(0,a.jsx)(s.code,{children:"install"}),": ",(0,a.jsx)(s.code,{children:"touch install.sh"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsxs)(s.p,{children:["Editar el archivo con su editor preferido: ",(0,a.jsx)(s.code,{children:"nano install.sh"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsxs)(s.p,{children:["En el archivo, debe agregar el contenido del siguiente enlace: ",(0,a.jsx)(s.a,{href:"https://gitlab.com/snippets/1852652",children:"GitLab Snippet"}),".\r\nObservar\xe1 a una p\xe1gina como la siguiente, donde debe copiar el contenido del script y pegarlo en su archivo install.sh, es importante que mantenga las estructura del mismo.\r\n",(0,a.jsx)(s.img,{alt:"imagen de script para Docker",src:n(6119).Z+"",width:"893",height:"527"})]}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsxs)(s.p,{children:['Para salir del editor y guardar, presione "',(0,a.jsx)(s.strong,{children:"ctrl + x"}),'". Luego se le consultar\xe1 si desea guardar los cambios, confirme con "',(0,a.jsx)(s.strong,{children:"y"}),'" y luego "',(0,a.jsx)(s.strong,{children:"enter"}),'".']}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsxs)(s.p,{children:["Darle permisos de ejecuci\xf3n al archivo:\r\nejecute ",(0,a.jsx)(s.strong,{children:"chmod +x install.sh"})]}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsxs)(s.p,{children:["El comando a utilizar requiere de dos par\xe1metros principalmente:\r\n",(0,a.jsx)("pre",{children:"./install.sh [repositorio] [dominio]"}),"\r\nPor ejemplo:\r\n",(0,a.jsxs)("pre",{children:["./install.sh ",(0,a.jsx)(s.a,{href:"https://gitlab.com/rash07/facturadorpro2",children:"https://gitlab.com/rash07/facturadorpro2"})," elfacturador.com"]})]}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsx)(s.p,{children:"Una vez ejecutado el comando, se iniciar\xe1 un proceso donde debe ir aceptando las preguntas y que le mostrar\xe1 en pantalla los valores que debe a\xf1adir en los 2 registros tipo TXT de su dominio con nombre"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"a."})," ",(0,a.jsx)(s.strong,{children:(0,a.jsx)(s.code,{children:"_acme-challenge.example.com"})})]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"b."})," ",(0,a.jsx)(s.strong,{children:(0,a.jsx)(s.code,{children:"_acme-challenge"})})," (casos como godday y puntope).\r\nen la siguiente imagen le muestran el valor como ",(0,a.jsx)(s.strong,{children:"v703JW"}),".... debera copiarlo y a\xf1adirlo al primer record TXT, seguidamente pulsar enter, se le mostrar\xe1 en pantalla un segundo valor para el segundo TXT\r\n",(0,a.jsx)(s.img,{alt:"error en consola",src:n(7153).Z+"",width:"519",height:"130"})]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsxs)(s.p,{children:["Editados los registros en su dominio, deber\xe1 aceptar para continuar y que el proceso verifique que sea exitoso. De ser exitoso, obtendr\xe1 una pantalla similar a la siguiente:\r\n",(0,a.jsx)(s.img,{alt:"error en consola2",src:n(5745).Z+"",width:"520",height:"253"})]}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsx)(s.p,{children:"Continuar\xe1 el proceso de actualizaci\xf3n del sistema. Se le solicitar\xe1 el usuario y contrase\xf1a de GitLab para clonar/descargar el proyecto en su instancia. Luego culminar\xe1 y tendr\xe1 los accesos listos en su dominio:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["Correo: ",(0,a.jsx)(s.strong,{children:(0,a.jsx)(s.a,{href:"mailto:admin@gmail.com",children:"admin@gmail.com"})})]}),"\n",(0,a.jsxs)(s.li,{children:["Contrase\xf1a: ",(0,a.jsx)(s.strong,{children:"123456"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(s.p,{children:"Una vez finalizado, puede proseguir con el manual de pruebas o dem\xe1s documentaci\xf3n de cada proyecto, sus URL son:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"PRO1:"})," ",(0,a.jsx)(s.a,{href:"https://gitlab.com/rash07/facturadorpro1",children:"https://gitlab.com/rash07/facturadorpro1"})]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"PRO2:"})," ",(0,a.jsx)(s.a,{href:"https://gitlab.com/rash07/facturadorpro2",children:"https://gitlab.com/rash07/facturadorpro2"})]}),"\n"]}),"\n",(0,a.jsx)(s.h3,{id:"recomendaciones",children:"Recomendaciones"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsx)(s.p,{children:"Luego de instalar el facturador, puede cambiar algunos par\xe1metros en el archivo .env\r\ncomo:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"La direcci\xf3n de env\xedo de correos que utiliza el facturador para enviar los archivos pdf, xml y cdr a sus clientes."}),"\n",(0,a.jsx)(s.li,{children:"Cambiar algunas configuraciones de plantillas de los pdf, entre otros."}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsxs)(s.p,{children:['Recuerde que siempre que se edita el archivo .env, debe utilizar el comando "php artisan config',":cache",'" dentro del contenedor de fpm1. Para m\xe1s detalles, puede observar el manual de actualizaci\xf3n ',(0,a.jsx)(s.a,{href:"https://docs.google.com/document/d/11PI1a9yjCPfH9CCuWmJSrdj1V8IEUffqurqvdkw29co/edit?usp=sharing",children:"aqu\xed"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsx)(s.p,{children:"La ruta donde ejecute el script ser\xe1 donde se clone el repositorio. Debe verificar que los usuarios del servidor tengan permisos a dicha ruta si desea acceder desde ftp o scp."}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(t,{...e})}):t(e)}},5745:(e,s,n)=>{n.d(s,{Z:()=>a});const a=n.p+"assets/images/docker-consola-2-7f5f786d387fed9c3429c00d10eca8e5.png"},7153:(e,s,n)=>{n.d(s,{Z:()=>a});const a=n.p+"assets/images/docker-consola-d63bb403780f9cf8eb37a2c8e1adbc78.png"},6119:(e,s,n)=>{n.d(s,{Z:()=>a});const a=n.p+"assets/images/script-docker-3f12f8e3e94c1bf15c3f8f2be827b92e.png"},4291:(e,s,n)=>{n.d(s,{Z:()=>a});const a=n.p+"assets/images/script-instalacion-099a6e81d457ffa37a05127b99bdac3b.png"},1151:(e,s,n)=>{n.d(s,{Z:()=>l,a:()=>o});var a=n(7294);const i={},r=a.createContext(i);function o(e){const s=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),a.createElement(r.Provider,{value:s},e.children)}}}]);